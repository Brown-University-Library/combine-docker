---
layout: default
title: Merging Records
---
<h1>Merging Records</h1>

<p>Duplicate/Merge Jobs are precisely what they sound like: they are used to copy, merge, and/or duplicate Records in Combine.</p>

<p>This section covers how to run Duplicate/Merge Jobs, building on the more generation information in “Part 7: Running Jobs.”</p>

<p>The first step for is to go to a Record Group’s overview page and click the blue “Duplicate/Merge Job” button. You may need to scroll down the page to find the button. Once you click it, you will be taken to a “New Job” page.</p>

<p>On the New Job page, you first have the option of giving the Job a name and adding notes. Below that, indicated by a blue alert bar, is an option to show Jobs from other Record Groups. Clicking this option will expand the page to display all existing Jobs in your instance of Combine. The expanded display can be collapsed again by clicking the blue bar a second time. In most cases you will want to keep this view collapsed. If you have many Record Groups in Combine, the expanded view could be a very long list.</p>

<p>Below the blue bar is a red alert bar indicating the one required parameter for a Duplicate/Merge Job: a single Input Job (or possibly multiple Input Jobs).</p>

<table>
  <tr>
    <td><img src="images/Part10-01-Red BarandBlueBarInputJobs.jpg" alt="an image of the interface showing input Jobs for a Duplicate/Merge Job" width="800" border="2"></td>
  </tr>
  <tr>
    <td><em>Input Jobs for a Duplicate/Merge Job</em></td>
  </tr>
</table>

<p>If you do have a large number of Jobs--even within one Record Group--you can use the ‘lineage graph,’ the graphic space above the table of Jobs, to reduce the number of displayed jobs:</p>

<ul>
  <li>Click on a Harvest Job: the table will be filtered to display only that Job; all other Jobs in the lineage graph will be grayed out</li>
  <li>Click on a Transformation Job, and the table will be filtered to display only that Job and Jobs that directly input to it; all other Jobs in the lineage graph will be grayed out</li>
</ul>

<p>Click outside of the Job to clear the filter and display all Jobs in the Record Group again.</p>

<table>
  <tr>
    <td><img src="images/Part10-02-LineageOfASingleHarvestJob.jpg" alt="an image of a lineage graph filtered to show only one Harvest Job" width="1000" border="2"></td>
  </tr>
  <tr>
    <td><em>A lineage graph filtered to a single Harvest Job</em></td>
  </tr>
</table>

<table>
  <tr>
    <td><img src="images/Part10-03-LineageGraphOfHarvestAndTransformJobs.jpg" alt="an image showing a lineage graph displaying only a Transformation Job and the Harvest Job that inputs into it" width="1000" border="2"></td>
  </tr>
  <tr>
    <td><em>A lineage graph filtered to display only a Transformation Job and its Harvest Job</em></td>
  </tr>
</table>

<p>As an alternative, on the Duplicate/Merge page each row in the table has an additional column on the left called “Select” that provides a filter button. Clicking this button creates a popup window that can be used to set input filters for that specific job (including Organization, Record Group, Job Type, Status, or even keyword searching). When filters are applied this way, Jobs will be grayed out in the lineage graph.</p>

<table>
  <tr>
    <td><img src="images/Part10-04-PopUp.jpg" alt="an image showing the popup window for setting specific input filters" width="800" border="2"></td>
  </tr>
  <tr>
    <td><em>The popup window for setting specific input filters</em></td>
  </tr>
</table>

<p>You can select <strong>multiple</strong> Jobs for Duplicate/Merge Jobs. When Jobs are merged, a duplicate check is run for the <strong>Record Identifiers only</strong>.
Below this section you will find a gold alert bar for the ‘optional parameters’ that were explained in “Part 7: Running Jobs,” including “Record Input Filter,” “Validation Tests,” “Transform Identifier,” and “DPLA Bulk Data Compare.”</p>

<p>Once all of these configurations are set, you are ready to scroll to the bottom of the page and click the green “Run Duplicate/Merge Job” button to begin.</p>

<p>The following screenshot shows the results of a Merge Job with two input Jobs from a Record Group’s overview screen:</p>

<table>
  <tr>
    <td><img src="images/Part10-05-MergingTwoJobs.jpg" alt="an image showing two Jobs being merged into one Job" width="800" border="2"></td>
  </tr>
  <tr>
    <td><em>Merging two Jobs into one Job</em></td>
  </tr>
</table>

<p>Why Merge or Duplicate Records?</p>

<p>Combine’s data model is quite flexible...</p>

<p><strong>Organization --> Record Group --> Job --> Record</strong></p>

<p>...but the price of that flexibility is additional complexity in execution.</p>

<p>Duplicate/Merge Jobs have a variety of possible uses:</p>

<ul>
  <li>Create a Duplicate Job so you can use it for analysis</li> 
  <li>Within a single Record Group, perform multiple, small harvests, and then Merge them into one large Job in preparation for publishing</li>
  <li>Merge Jobs are the only Job type that can pull Jobs from across Organizations or Record Groups</li>
  <li>Analysis Jobs, in reality, are Merge Jobs behind-the-scenes</li> 
  <li>Separate a subset of valid or invalid records from a Job to allow more precise Transformation or Analysis Jobs</li>
</ul>

<p>That last use case--separating a subset of valid/invalid records from a Job deserves more explanation.  In that scenario you could:</p>

<ul>
  <li>With a Duplicate/Merge Job, select only invalid Records from Job A and use them to create Job B</li>
  <li>Apply a Transformation Job to Job B to fix those Records’ validation problems. Then Merge the valid Records from Job A with the now valid records from Job B to create Job C</li>
</ul>

<table>
  <tr>
    <td><img src="images/Part10-06-LineageOfMergeJob.jpg" alt="a lineage graph showing a series of changes made to a Job" width="800" border="2"></td>
  </tr>
  <tr>
    <td><em>Creating a ‘Job B’ of invalid Records from Job A; applying a Transformation Job only to those invalid Records; and then merging Job A and Transformed Job B together into a fully valid Job C</em></td>
  </tr>
</table>

<p>This can be helpful if Job A is quite large and has only a few Records that need to be Transformed--especially if running that Transform on the entire set of Records might break--i.e. invalidate--some of the perfectly good Records in Job A.</p><br /><br />

<p>Next: <a href="/combine-docker/validation">Validation</a></p>
